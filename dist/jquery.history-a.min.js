!function(e){e.History||(e.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(e){var t=e.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"");return t},getState:function(){var t=e.History;return t.state},setState:function(t){var n=e.History;return t=n.extractHash(t),n.state=t,n.state},getHash:function(){var t=e.History,n=t.extractHash(window.location.hash||location.hash);return n},setHash:function(t){var n=e.History;return t=n.extractHash(t),"undefined"!=typeof window.location.hash?window.location.hash!==t&&(window.location.hash=t):location.hash!==t&&(location.hash=t),t},go:function(t){var n=e.History;t=n.extractHash(t);var r=n.getHash(),a=n.getState();return t!==r?n.setHash(t):(t!==a&&n.setState(t),n.trigger()),!0},hashchange:function(t){var n=e.History,r=n.getHash();return n.go(r),!0},bind:function(t,n){var r=e.History;return n?("undefined"==typeof r.handlers.specific[t]&&(r.handlers.specific[t]=[]),r.handlers.specific[t].push(n)):(n=t,r.handlers.generic.push(n)),!0},trigger:function(t){var n=e.History;"undefined"==typeof t&&(t=n.getState());var r,a,o,i;if("undefined"!=typeof n.handlers.specific[t])for(i=n.handlers.specific[t],r=0,a=i.length;a>r;++r)(o=i[r])(t);for(i=n.handlers.generic,r=0,a=i.length;a>r;++r)(o=i[r])(t);return!0},construct:function(){var t=e.History;return e(document).ready(function(){t.domReady()}),!0},configure:function(t){var n=e.History;return n.options=e.extend(n.options,t),!0},domReadied:!1,domReady:function(){var t=e.History;if(!t.domRedied)return t.domRedied=!0,t.$window=e(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},nativeSupport:function(e){e=ax5.info.browser;var t=e.version,n=parseInt(t,10),r=t.split(/[^0-9]/g),a=(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),!1);return"ie"==e.name&&n>=8,a=!0,a},hashchangeLoader:function(){var t=e.History,n=t.nativeSupport();if(n){var r=t.getHash();r&&t.$window.trigger("hashchange")}else{var a;if(e.browser.msie){t.$iframe=e('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close();var o=!1;a=function(){var e=t.getHash(),n=t.getState(),r=t.extractHash(t.$iframe.contentWindow.document.location.hash);n!==e?(o||(t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),t.$iframe.contentWindow.document.location.hash=e),o=!1,t.$window.trigger("hashchange")):n!==r&&(o=!0,t.setHash(r))}}else a=function(){var e=t.getHash(),n=t.getState();n!==e&&t.$window.trigger("hashchange")};setInterval(a,200)}return!0}},e.History.construct())}(jQuery);